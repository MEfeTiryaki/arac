<?xml version="1.0" encoding="utf-8"?>

<launch>

  <!-- Set true for simulation of arac in Gazebo -->
  <arg name="simulation" default="true"/>
  <!-- Set true to simulate sensors without noise and bias -->
  <arg name="perfect_sensors" default="true"/>
  <!-- Set true to fix the base of arac in simulation -->
  <arg name="fixed" default="false"/>
  <!-- Give the robot description parameter a name -->
  <arg name="description_name" default="arac_description"/>
  <!-- Set robot description path -->
  <arg name="description_file" default="$(find arac_description)/urdf/arac.urdf.xacro"/>
  <!-- Set true to draw the meshes -->
  <arg name="mesh" default="false"/>
  <!-- Set the material color -->
  <arg name="material_color_rgba" default="0.7 0.7 0.7 1.0"/>

  <!-- TF prefix -->
  <arg name="tf_prefix" default=""/>
  <!-- Joint state topic name -->
  <arg name="joint_states_topic" default="/state_estimator/joint_states"/>

  <arg name="model_path"                              default="$(find gazebo_worlds)/.."/>
  <!-- Name of the world -->
  <arg name="world"                                   default="empty"/>
  <!-- Path to the world file -->
  <arg name="world_file"                              default="$(find gazebo_worlds)/worlds/$(arg world).world"/>

  <!-- Namespace to run the nodes in -->
  <arg name="run_rviz"                                default="true"/>

  <arg name="tf_minimal"                                default="false"/>
  <!-- rviz configuration -->
  <arg name="rviz_config_path"                        default="$(find arac_sim)/config/rviz/arac.rviz"/>
  <!-- Path to the RViz world -->
  <arg name="rviz_world_path"                         default="$(find gazebo_worlds)/rviz/$(arg world).yaml"/>

  <node name="arac_joint_state_publisher" pkg="joint_state_publisher" type="joint_state_publisher" output="screen">
     <param name="use_gui"           value="false"/>
     <param name="rate"              value="100"/>
     <rosparam param="source_list">["/KulmanState/joint_states"]</rosparam>
     <remap from="robot_description" to="arac_description"/>
     <remap from="joint_states"      to="$(arg joint_states_topic)"/>
   </node>

   <node ns="arac_tf_publisher" name="robot_state_publisher" pkg="robot_state_publisher" type="robot_state_publisher" output="screen">
     <param name="publish_frequency" value="100"/>
     <param name="use_tf_static"     value="true"/>
     <param name="tf_prefix"         value="$(arg tf_prefix)"/>
     <remap from="robot_description" to="arac_description"/>
     <remap from="joint_states"      to="$(arg joint_states_topic)"/>
   </node>
  <!-- Run xacro script to generate arac description -->
  <param name="$(arg description_name)" command="$(find xacro)/xacro --inorder
    $(arg description_file)
    simulation:=$(arg simulation)
    perfect_sensors:=$(arg perfect_sensors)
    fixed:=$(arg fixed)
    material_color_rgba:='$(arg material_color_rgba)'"/>

</launch>
